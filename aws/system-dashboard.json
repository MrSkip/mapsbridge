{
  "widgets": [
    {
      "type": "text",
      "x": 0,
      "y": 0,
      "width": 24,
      "height": 2,
      "properties": {
        "markdown": "# Maps & Geocoding"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 2,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "Failed Map Extractions by Provider",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"maps.extraction.failure.count\"', 'Sum', 300)",
              "label": "",
              "id": "e_extraction_failure",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Sum",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries",
        "yAxis": {
          "left": {
            "label": "Failure Count",
            "min": 0
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 8,
      "y": 2,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "Successful Map Extractions by Provider & Extractor",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"maps.extraction.success.count\"', 'Sum', 300)",
              "label": "",
              "id": "e_extraction_success",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Sum",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries",
        "yAxis": {
          "left": {
            "label": "Success Count",
            "min": 0
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 16,
      "y": 2,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "Geocoding Operations by Service",
        "metrics": [
          [
            "mapsbridge",
            "geocoding.operation.count",
            "service",
            "google",
            "operation",
            "reverseGeocode",
            {
              "region": "${AWS::Region}",
              "label": "Google Reverse Geocoding"
            }
          ],
          [
            ".",
            ".",
            ".",
            "google",
            ".",
            "forwardGeocode",
            {
              "region": "${AWS::Region}",
              "label": "Google Forward Geocoding"
            }
          ],
          [
            ".",
            ".",
            ".",
            "google",
            ".",
            "placeIdLookup",
            {
              "region": "${AWS::Region}",
              "label": "Google Place ID Lookup"
            }
          ],
          [
            ".",
            ".",
            ".",
            "radar",
            ".",
            "reverseGeocode",
            {
              "region": "${AWS::Region}",
              "label": "Radar Reverse Geocoding"
            }
          ],
          [
            ".",
            ".",
            ".",
            "radar",
            ".",
            "forwardGeocode",
            {
              "region": "${AWS::Region}",
              "label": "Radar Forward Geocoding"
            }
          ]
        ],
        "stat": "Sum",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries",
        "yAxis": {
          "left": {
            "label": "Operation Count",
            "min": 0
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 8,
      "width": 12,
      "height": 6,
      "properties": {
        "title": "Map Conversion Requests by Source",
        "metrics": [
          [
            "mapsbridge",
            "maps.converter.request.source.count",
            "source",
            "API",
            {
              "region": "${AWS::Region}",
              "label": "API Requests"
            }
          ],
          [
            ".",
            ".",
            ".",
            "WEB",
            {
              "region": "${AWS::Region}",
              "label": "Web Requests"
            }
          ],
          [
            ".",
            ".",
            ".",
            "TELEGRAM",
            {
              "region": "${AWS::Region}",
              "label": "Telegram Requests"
            }
          ]
        ],
        "stat": "Sum",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries",
        "yAxis": {
          "left": {
            "label": "Request Count",
            "min": 0
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 14,
      "width": 12,
      "height": 6,
      "properties": {
        "title": "Input Types Used",
        "metrics": [
          [
            "mapsbridge",
            "maps.input.type.count",
            "type",
            "coordinates",
            {
              "region": "${AWS::Region}",
              "label": "Coordinates Input"
            }
          ],
          [
            ".",
            ".",
            ".",
            "url",
            {
              "region": "${AWS::Region}",
              "label": "URL Input"
            }
          ]
        ],
        "stat": "Sum",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries",
        "yAxis": {
          "left": {
            "label": "Usage Count",
            "min": 0
          }
        }
      }
    },
    {
      "type": "text",
      "x": 0,
      "y": 20,
      "width": 24,
      "height": 2,
      "properties": {
        "markdown": "# üöÄ Application & System Overview"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 22,
      "width": 4,
      "height": 6,
      "properties": {
        "metrics": [
          [
            {
              "expression": "METRICS()/3600000",
              "label": "Hours",
              "id": "e1",
              "region": "${AWS::Region}"
            }
          ],
          [
            "mapsbridge",
            "process.uptime.value",
            {
              "region": "${AWS::Region}",
              "id": "m1",
              "visible": false
            }
          ]
        ],
        "title": "Application Uptime (Days)",
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "singleValue",
        "yAxis": {
          "left": {
            "label": "Days"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 4,
      "y": 22,
      "width": 5,
      "height": 6,
      "properties": {
        "title": "System CPU Usage",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"system.cpu.usage.value\"', 'Average', 300)",
              "label": "",
              "id": "e_sys_cpu",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries",
        "yAxis": {
          "left": {
            "min": 0,
            "max": 1
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 9,
      "y": 22,
      "width": 5,
      "height": 6,
      "properties": {
        "title": "System Load Average (1m)",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"system.load.average.1m.value\"', 'Average', 300)",
              "label": "",
              "id": "e_load",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries"
      }
    },
    {
      "type": "metric",
      "x": 14,
      "y": 22,
      "width": 5,
      "height": 6,
      "properties": {
        "title": "Process CPU Usage",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"process.cpu.usage.value\"', 'Average', 300)",
              "label": "",
              "id": "e_proc_cpu",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries"
      }
    },
    {
      "type": "metric",
      "x": 19,
      "y": 22,
      "width": 5,
      "height": 6,
      "properties": {
        "title": "Disk Free Space",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"disk.free.value\"', 'Average', 300)",
              "label": "",
              "id": "e_disk",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries",
        "yAxis": {
          "left": {
            "label": "Bytes"
          }
        }
      }
    },
    {
      "type": "text",
      "x": 0,
      "y": 28,
      "width": 24,
      "height": 2,
      "properties": {
        "markdown": "# üñ•Ô∏è JVM & Memory Metrics"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 30,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "JVM Memory Usage by Area",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"jvm.memory.used.value\"', 'Average', 300)",
              "label": "",
              "id": "e_mem_used",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries",
        "yAxis": {
          "left": {
            "label": "Bytes"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 8,
      "y": 30,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "JVM Threads",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"jvm.threads.live.value\"', 'Average', 300)",
              "label": "Live Threads",
              "id": "e_threads_live",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"jvm.threads.peak.value\"', 'Average', 300)",
              "label": "Peak Threads",
              "id": "e_threads_peak",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"jvm.threads.daemon.value\"', 'Average', 300)",
              "label": "Daemon Threads",
              "id": "e_threads_daemon",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries"
      }
    },
    {
      "type": "metric",
      "x": 16,
      "y": 30,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "GC Memory Stats",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"jvm.gc.live.data.size.value\"', 'Average', 300)",
              "label": "Live Data",
              "id": "e_gc_live",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"jvm.gc.max.data.size.value\"', 'Average', 300)",
              "label": "Max Data",
              "id": "e_gc_max",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"jvm.gc.memory.allocated.value\"', 'Average', 300)",
              "label": "Allocated",
              "id": "e_gc_alloc",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries",
        "yAxis": {
          "left": {
            "label": "Bytes"
          }
        }
      }
    },
    {
      "type": "text",
      "x": 0,
      "y": 36,
      "width": 24,
      "height": 2,
      "properties": {
        "markdown": "# üóÉÔ∏è Database & Connection Pool Metrics"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 38,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "HikariCP Connections",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"hikaricp.connections.active.value\"', 'Average', 300)",
              "label": "Active",
              "id": "e_conn_active",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"hikaricp.connections.idle.value\"', 'Average', 300)",
              "label": "Idle",
              "id": "e_conn_idle",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"hikaricp.connections.max.value\"', 'Average', 300)",
              "label": "Max",
              "id": "e_conn_max",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries"
      }
    },
    {
      "type": "metric",
      "x": 8,
      "y": 38,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "Connection Pool Performance",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"hikaricp.connections.acquire.count\"', 'Sum', 300)",
              "label": "Acquire Count",
              "id": "e_conn_acquire",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"hikaricp.connections.usage.value\"', 'Average', 300)",
              "label": "Usage Time",
              "id": "e_conn_usage",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"hikaricp.connections.pending.value\"', 'Average', 300)",
              "label": "Pending",
              "id": "e_conn_pending",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries"
      }
    },
    {
      "type": "metric",
      "x": 16,
      "y": 38,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "Connection Issues",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"hikaricp.connections.timeout.count\"', 'Sum', 300)",
              "label": "Timeouts",
              "id": "e_conn_timeout",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"hikaricp.connections.creation.count\"', 'Sum', 300)",
              "label": "Created",
              "id": "e_conn_creation",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Sum",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries"
      }
    },
    {
      "type": "text",
      "x": 0,
      "y": 44,
      "width": 24,
      "height": 2,
      "properties": {
        "markdown": "# üåê HTTP & Web Server Metrics"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 46,
      "width": 12,
      "height": 6,
      "properties": {
        "title": "HTTP Requests by Method & Status",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"http.server.requests.count\"', 'Sum', 300)",
              "label": "",
              "id": "e_http_requests",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Sum",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries"
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 46,
      "width": 12,
      "height": 6,
      "properties": {
        "title": "Tomcat Sessions",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"tomcat.sessions.active.current.value\"', 'Average', 300)",
              "label": "Active Current",
              "id": "e_sessions_current",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"tomcat.sessions.active.max.value\"', 'Average', 300)",
              "label": "Active Max",
              "id": "e_sessions_max",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"tomcat.sessions.created.count\"', 'Sum', 300)",
              "label": "Created",
              "id": "e_sessions_created",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"tomcat.sessions.expired.count\"', 'Sum', 300)",
              "label": "Expired",
              "id": "e_sessions_expired",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries"
      }
    },
    {
      "type": "text",
      "x": 0,
      "y": 52,
      "width": 24,
      "height": 2,
      "properties": {
        "markdown": "# ‚ö° Thread Pool & Executor Metrics"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 54,
      "width": 12,
      "height": 6,
      "properties": {
        "title": "Executor Pool Status",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"executor.active.value\"', 'Average', 300)",
              "label": "Active",
              "id": "e_exec_active",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"executor.pool.size.value\"', 'Average', 300)",
              "label": "Pool Size",
              "id": "e_exec_size",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"executor.pool.core.value\"', 'Average', 300)",
              "label": "Core Size",
              "id": "e_exec_core",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"executor.pool.max.value\"', 'Average', 300)",
              "label": "Max Size",
              "id": "e_exec_max",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries"
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 54,
      "width": 12,
      "height": 6,
      "properties": {
        "title": "Executor Queue & Completion",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"executor.queued.value\"', 'Average', 300)",
              "label": "Queued",
              "id": "e_exec_queued",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"executor.queue.remaining.value\"', 'Average', 300)",
              "label": "Queue Remaining",
              "id": "e_exec_remaining",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"executor.completed.count\"', 'Sum', 300)",
              "label": "Completed",
              "id": "e_exec_completed",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries"
      }
    },
    {
      "type": "text",
      "x": 0,
      "y": 60,
      "width": 24,
      "height": 2,
      "properties": {
        "markdown": "# üõ°Ô∏è Security & Rate Limiting"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 62,
      "width": 12,
      "height": 6,
      "properties": {
        "title": "Rate Limiter Available Permissions",
        "metrics": [
          [
            "mapsbridge",
            "resilience4j.ratelimiter.available.permissions.value",
            "name",
            "ipRateLimiter",
            {
              "region": "${AWS::Region}"
            }
          ],
          [
            ".",
            ".",
            ".",
            "emailRateLimiter",
            {
              "region": "${AWS::Region}"
            }
          ],
          [
            ".",
            ".",
            ".",
            "geocodingIpRateLimiter",
            {
              "region": "${AWS::Region}"
            }
          ],
          [
            ".",
            ".",
            ".",
            "geocodingEmailRateLimiter",
            {
              "region": "${AWS::Region}"
            }
          ],
          [
            ".",
            ".",
            ".",
            "geocodingChatIdRateLimiter",
            {
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries"
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 62,
      "width": 12,
      "height": 6,
      "properties": {
        "title": "Spring Security Metrics",
        "metrics": [
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"spring.security.authorizations.count\"', 'Sum', 300)",
              "label": "Authorizations",
              "id": "e_auth",
              "region": "${AWS::Region}"
            }
          ],
          [
            {
              "expression": "SEARCH('Namespace=\"mapsbridge\" AND MetricName=\"spring.security.filterchains.active.value\"', 'Average', 300)",
              "label": "Active Filter Chains",
              "id": "e_filterchains",
              "region": "${AWS::Region}"
            }
          ]
        ],
        "stat": "Average",
        "period": 300,
        "region": "${AWS::Region}",
        "view": "timeSeries"
      }
    }
  ]
}
  
