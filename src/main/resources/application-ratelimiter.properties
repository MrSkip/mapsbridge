# =============================================================================
# RESILIENCE4J RATE LIMITER CONFIGURATION
# =============================================================================
resilience4j.ratelimiter.metrics.enabled=true
# =============================================================================
# DEFAULT CONFIGURATION
# =============================================================================
resilience4j.ratelimiter.configs.default.register-health-indicator=true
resilience4j.ratelimiter.configs.default.timeout-duration=PT0S
# =============================================================================
# USER SIGN-UP RATE LIMITERS
# =============================================================================
# IP-based rate limiter for user sign-ups
resilience4j.ratelimiter.configs.ipConfig.register-health-indicator=true
resilience4j.ratelimiter.configs.ipConfig.limit-for-period=${APP_RATE_LIMIT_MAX_REQUESTS_PER_IP:10}
resilience4j.ratelimiter.configs.ipConfig.limit-refresh-period=PT${APP_RATE_LIMIT_WINDOW_MINUTES:60}M
resilience4j.ratelimiter.configs.ipConfig.timeout-duration=PT0S
# Email-based rate limiter for user sign-ups
resilience4j.ratelimiter.configs.emailConfig.register-health-indicator=true
resilience4j.ratelimiter.configs.emailConfig.limit-for-period=${APP_RATE_LIMIT_MAX_REQUESTS_PER_EMAIL:8}
resilience4j.ratelimiter.configs.emailConfig.limit-refresh-period=PT${APP_RATE_LIMIT_WINDOW_MINUTES:60}M
resilience4j.ratelimiter.configs.emailConfig.timeout-duration=PT0S
# =============================================================================
# GEOCODING API DAILY QUOTA RATE LIMITERS
# =============================================================================
# IP-based daily quota for geocoding API
resilience4j.ratelimiter.configs.geocodingIpConfig.register-health-indicator=true
resilience4j.ratelimiter.configs.geocodingIpConfig.limit-for-period=${APP_GEOCODING_DAILY_QUOTA_PER_IP:100}
resilience4j.ratelimiter.configs.geocodingIpConfig.limit-refresh-period=PT24H
resilience4j.ratelimiter.configs.geocodingIpConfig.timeout-duration=PT0S
# Email-based daily quota for geocoding API
resilience4j.ratelimiter.configs.geocodingEmailConfig.register-health-indicator=true
resilience4j.ratelimiter.configs.geocodingEmailConfig.limit-for-period=${APP_GEOCODING_DAILY_QUOTA_PER_EMAIL:500}
resilience4j.ratelimiter.configs.geocodingEmailConfig.limit-refresh-period=PT24H
resilience4j.ratelimiter.configs.geocodingEmailConfig.timeout-duration=PT0S
# Chat ID-based daily quota for geocoding API
resilience4j.ratelimiter.configs.geocodingChatIdConfig.register-health-indicator=true
resilience4j.ratelimiter.configs.geocodingChatIdConfig.limit-for-period=${APP_GEOCODING_DAILY_QUOTA_PER_CHAT_ID:100}
resilience4j.ratelimiter.configs.geocodingChatIdConfig.limit-refresh-period=PT24H
resilience4j.ratelimiter.configs.geocodingChatIdConfig.timeout-duration=PT0S
# =============================================================================
# RATE LIMITER INSTANCES
# =============================================================================
# User sign-up rate limiter instances
resilience4j.ratelimiter.instances.ipRateLimiter.base-config=ipConfig
resilience4j.ratelimiter.instances.emailRateLimiter.base-config=emailConfig
# Geocoding API daily quota rate limiter instances
resilience4j.ratelimiter.instances.geocodingIpRateLimiter.base-config=geocodingIpConfig
resilience4j.ratelimiter.instances.geocodingEmailRateLimiter.base-config=geocodingEmailConfig
resilience4j.ratelimiter.instances.geocodingChatIdRateLimiter.base-config=geocodingChatIdConfig
# =============================================================================
# RATE LIMITER CLEANUP CONFIGURATION
# =============================================================================
# Maximum idle time before cleanup (hours)
app.rate-limiter.cleanup.max-idle-hours=${APP_RATE_LIMITER_CLEANUP_MAX_IDLE_HOURS:25}